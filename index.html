<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on https://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" href="stylesheets/github-dark.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Cordova-plugin-appsflyer</title>
  <meta name="description" content="AppsFlyer plugin for Cordova (Phonegap)">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Cordova-plugin-appsflyer</h1>
    </header>
    <div id="container">
      <p class="tagline">AppsFlyer plugin for Cordova (Phonegap)</p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/tarball/master" class="download-button tar"><span>Download</span></a>
          <a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/zipball/master" class="download-button zip"><span>Download</span></a>
          <a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer" class="code">View Cordova-plugin-appsflyer on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h1>
<a id="cordova--phonegap-appsflyer-plugin-for-android-and-ios" class="anchor" href="#cordova--phonegap-appsflyer-plugin-for-android-and-ios" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cordova / PhoneGap AppsFlyer Plugin for Android and iOS.</h1>

<p><a href="#"><img src="https://img.shields.io/npm/v/cordova-plugin-appsflyer.svg?style=flat" alt="Version"></a>
<a href="#"><img src="https://img.shields.io/badge/cordova-v5.x-blue.svg?style=flat" alt="Cordova status"></a>
<a href="#"><img src="https://img.shields.io/npm/dt/cordova-plugin-appsflyer.svg?style=flat" alt="NPM downloads"></a>
<a href="https://github.com/devdmitryhub/cordova-plugin-appsflyer/issues"><img src="http://githubbadges.herokuapp.com/devdmitryhub/cordova-plugin-appsflyer/issues.svg" alt="Github Issues"></a></p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Documentation</h2>

<ul>
<li>
<a href="#installation">Installation</a>

<ul>
<li><a href="#manual-installation">Manual Installation</a></li>
<li>
<a href="#phonegap-build">Phone Gap Build</a><br>
</li>
</ul>
</li>
<li><a href="#usage-api">Usage API</a></li>
<li><a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/wiki">Plugin wiki pages</a></li>
<li><a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/releases">Change Log</a></li>
</ul>

<p><strong>Note:</strong> integrated AppsFlyer SDK has restrictions for iOS archs (armv7, arm64, <strong>not</strong> <em>armv7s</em>) it's fixed since v.3.3.3</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Using the reference to GitHub repository:</p>

<pre><code>cordova plugin add https://github.com/DevDmitryHub/cordova-plugin-appsflyer.git
</code></pre>

<p>Using plugin name (Cordova v.5+):</p>

<pre><code>cordova plugin add cordova-plugin-appsflyer
</code></pre>

<p>For old Cordova versions you should add reference to the plugin script file. 
Then reference <code>appsflyer.js</code> in <code>index.html</code>, after <code>cordova.js</code>/<code>phonegap.js</code>.
Mind the path:</p>

<div class="highlight highlight-text-html-basic"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">type</span>=<span class="pl-s"><span class="pl-pds">"</span>text/javascript<span class="pl-pds">"</span></span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>js/plugins/appsflyer.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<h3>
<a id="manual-installation" class="anchor" href="#manual-installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Manual Installation</h3>

<p>For more details about manual installation see wiki page <a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/wiki/Manual-installation">Manual Installation</a> or use author's <a href="https://github.com/AppsFlyerSDK/PhoneGap#manual-installation">page</a>.</p>

<h3>
<a id="phonegap-build" class="anchor" href="#phonegap-build" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>PhoneGap Build</h3>

<p>Built against Phonegap &gt;= 3.3.x.</p>

<p>Add the following line to your config xml:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">gap</span><span class="pl-ent">:</span><span class="pl-ent">plugin</span> <span class="pl-e">name</span>=<span class="pl-s"><span class="pl-pds">"</span>cordova-plugin-appsflyer<span class="pl-pds">"</span></span> <span class="pl-e">version</span>=<span class="pl-s"><span class="pl-pds">"</span>3.3.1<span class="pl-pds">"</span></span> /&gt;</pre></div>

<h2>
<a id="usage-api" class="anchor" href="#usage-api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage API</h2>

<h4>
<a id="1-set-your-app_id-ios-only-dev_key-and-enable-appsflyer-to-detect-installations-sessions-app-opens-and-updates" class="anchor" href="#1-set-your-app_id-ios-only-dev_key-and-enable-appsflyer-to-detect-installations-sessions-app-opens-and-updates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>1. Set your App_ID (iOS only), Dev_Key and enable AppsFlyer to detect installations, sessions (app opens), and updates.</h4>

<p><strong>Note:</strong> <em>This is the minimum requirement to start tracking your app installs and it's already implemented in this plugin. You *</em><em>MUST</em>** modify this call and provide:*</p>

<ul>
<li>
<em>devKey</em> - Your application devKey provided by AppsFlyer.</li>
<li>
<em>appId</em>  - <strong>For iOS only.</strong> Your iTunes application id.</li>
</ul>

<div class="highlight highlight-source-js"><pre><span class="pl-c1">document</span>.<span class="pl-en">addEventListener</span>(<span class="pl-s"><span class="pl-pds">"</span>deviceready<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(){
    <span class="pl-k">var</span> args <span class="pl-k">=</span> [];
    <span class="pl-k">var</span> devKey <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>xxXXXXXxXxXXXXxXXxxxx8<span class="pl-pds">"</span></span>;   <span class="pl-c">// your AppsFlyer devKey</span>
    <span class="pl-smi">args</span>.<span class="pl-c1">push</span>(devKey);
    <span class="pl-k">var</span> userAgent <span class="pl-k">=</span> <span class="pl-c1">window</span>.<span class="pl-smi">navigator</span>.<span class="pl-c1">userAgent</span>.<span class="pl-c1">toLowerCase</span>();

    <span class="pl-k">if</span> (<span class="pl-sr"><span class="pl-pds">/</span>iphone<span class="pl-k">|</span>ipad<span class="pl-k">|</span>ipod<span class="pl-pds">/</span></span>.<span class="pl-c1">test</span>( userAgent )) {
        <span class="pl-k">var</span> appId <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>123456789<span class="pl-pds">"</span></span>;            <span class="pl-c">// your ios app id in app store</span>
        <span class="pl-smi">args</span>.<span class="pl-c1">push</span>(appId);
    }
    <span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">initSdk</span>(args);
}, <span class="pl-c1">false</span>);</pre></div>

<h4>
<a id="2-set-currency-code-optional" class="anchor" href="#2-set-currency-code-optional" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>2. Set currency code (optional)</h4>

<div class="highlight highlight-source-js"><pre><span class="pl-c">//USD is default value. Acceptable ISO(http://www.xe.com/iso4217.php) Currency codes here. Examples:  </span>
<span class="pl-c">//British Pound: window.plugins.appsFlyer.setCurrencyCode("GBP");  </span>
<span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">setCurrencyCode</span>(<span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>);</pre></div>

<h4>
<a id="3-set-customer-user-id-advance" class="anchor" href="#3-set-customer-user-id-advance" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>3. Set customer user ID (Advance)</h4>

<p><em>Setting your own custom ID will enable you to cross-reference your own unique ID with AppsFlyer’s user ID and the 
other devices’ IDs. This ID will be available at AppsFlyer CSV reports along with postbacks APIs for cross-referencing 
with you internal IDs.</em><br>
<strong>Note:</strong> <em>The ID must be set during the first launch of the app at the SDK initialization. The best practice is to call to this API during <code>deviceready</code> event if possible.</em></p>

<div class="highlight highlight-source-js"><pre><span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">setAppUserId</span>(userId);</pre></div>

<h4>
<a id="4-in-app-events-tracking-api-optional" class="anchor" href="#4-in-app-events-tracking-api-optional" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4. In App Events Tracking API (optional)</h4>

<p><em>These events help you track how loyal users discover your app and attribute them to specific campaign/source.</em></p>

<ul>
<li><em>These in-app events help you track how loyal users discover your app, and attribute them to specific 
campaigns/media-sources. Please take the time define the event/s you would like to measure to allow you 
to track ROI (Return on Investment) and LTV (Lifetime Value).</em></li>
<li><em>The “trackEvent” method allows you to send in-app events to AppsFlyer analytics. This method allows you to 
add events dynamically by adding them directly to the application code.</em></li>
</ul>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// eventName - any string to define the event name. For example: “registration” or “purchase”</span>
<span class="pl-c">// eventValue - the sales value. For example: 0.99 or 0.79</span>
<span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">sendTrackingWithEvent</span>(eventName, eventValue);
<span class="pl-c">// window.plugins.appsFlyer.sendTrackingWithEvent(eventName, "");</span></pre></div>

<h5>
<a id="41-rich-in-app-events-tracking-api-optional" class="anchor" href="#41-rich-in-app-events-tracking-api-optional" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>4.1 Rich In App Events Tracking API (optional)</h5>

<p>AppsFlyer’s rich in­app events provide advertisers with the ability to track any post­install event and attribute it to a media source and campaign.
An in­app event is comprised of an event name and event parameters</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> eventName <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>af_add_to_cart<span class="pl-pds">"</span></span>;
<span class="pl-k">var</span> eventValues <span class="pl-k">=</span> {<span class="pl-s"><span class="pl-pds">"</span>af_content_id<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>id123<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>af_currency<span class="pl-pds">"</span></span><span class="pl-k">:</span><span class="pl-s"><span class="pl-pds">"</span>USD<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>af_revenue<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>2<span class="pl-pds">"</span></span>};
<span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">trackEvent</span>(eventName, eventValues);</pre></div>

<h4>
<a id="5-get-appsflyers-unique-device-uid-advanced" class="anchor" href="#5-get-appsflyers-unique-device-uid-advanced" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>5. Get AppsFlyer’s Unique Device UID (Advanced)</h4>

<p><em>Get AppsFlyer’s proprietary device ID. AppsFlyer device ID is the main ID used by AppsFlyer in the Reports and API’s.</em></p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// getUserIdCallbackFn - callback function</span>
<span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">getAppsFlyerUID</span>(getUserIdCallbackFn);</pre></div>

<h6>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example:</h6>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> <span class="pl-en">getUserIdCallbackFn</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">id</span>) {
    <span class="pl-en">alert</span>(<span class="pl-s"><span class="pl-pds">'</span>received id is: <span class="pl-pds">'</span></span> <span class="pl-k">+</span> id);
}
<span class="pl-c1">window</span>.<span class="pl-c1">plugins</span>.<span class="pl-smi">appsFlyer</span>.<span class="pl-en">getAppsFlyerUID</span>(getUserIdCallbackFn);</pre></div>

<h4>
<a id="6-accessing-appsflyer-attribution--conversion-data-from-the-sdk-deferred-deep-linking" class="anchor" href="#6-accessing-appsflyer-attribution--conversion-data-from-the-sdk-deferred-deep-linking" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>6. Accessing AppsFlyer Attribution / Conversion Data from the SDK (Deferred Deep-linking).</h4>

<p>Read more: <a href="http://support.appsflyer.com/entries/69796693-Accessing-AppsFlyer-Attribution-Conversion-Data-from-the-SDK-Deferred-Deep-linking-">Android</a>, <a href="http://support.appsflyer.com/entries/22904293-Testing-AppsFlyer-iOS-SDK-Integration-Before-Submitting-to-the-App-Store-">iOS</a><br>
<strong>Note:</strong> AppsFlyer plugin will fire <code>onInstallConversionDataLoaded</code> event with attribution data. You must implement listener to receive the data.</p>

<h6>
<a id="example-1" class="anchor" href="#example-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example:</h6>

<div class="highlight highlight-source-js"><pre><span class="pl-c1">document</span>.<span class="pl-en">addEventListener</span>(<span class="pl-s"><span class="pl-pds">'</span>onInstallConversionDataLoaded<span class="pl-pds">'</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">e</span>){
    <span class="pl-k">var</span> attributionData <span class="pl-k">=</span> (<span class="pl-c1">JSON</span>.<span class="pl-en">stringify</span>(<span class="pl-smi">e</span>.<span class="pl-smi">detail</span>));
    <span class="pl-en">alert</span>(attributionData);
}, <span class="pl-c1">false</span>);</pre></div>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">
      <p><a href="https://github.com/DevDmitryHub" class="avatar"><img src="https://avatars1.githubusercontent.com/u/8300498?v=3&amp;s=60" width="48" height="48"></a> <a href="https://github.com/DevDmitryHub">DevDmitryHub</a> maintains <a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer">Cordova-plugin-appsflyer</a></p>


      </div>
      <div class="creds">
        <small>This page generated using <a href="https://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/tarball/master" class="tar">tar</a><a href="https://github.com/DevDmitryHub/cordova-plugin-appsflyer/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
